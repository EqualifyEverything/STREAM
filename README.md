# Equalify Formatter
Standardize Results from Automated Testing Providers

## Problem
Automated tests give results in lots of different formats. This requires solutions, like [Testaro](https://github.com/cvs-health/testaro) and [Equalify](https://github.com/equalifyEverything/equalify), to do a lot of work in reformatting before they carry out a task.

## Solution
The Equalify Formatter is a web service to format the results of any automated accessibility scan. We take in results from a scan, then output formatted results. In doing so we aim to accomplish three goals:
1) Retain all information that's useful to fix reported violations.
2) Support all automated web accessibility scans.
3) Deliver results efficiently.

## Sample Input
```json
{
  "scan": "axe",
  "pageUrl": "https://example.com",
  "results": []
}
```
### Input Attributes
- "scan": Unique ID of a [supported scan](#supported-scans).
- "input": JSON input from that scan.

## Sample Output
```json
{
  "elements": [
    {
      "elementId": "",
      "elementCode": "",
      "elementPages": [],
      "elementMessages": [1,2],
      "elementRules": [],
      "elementTags": [],
      "relatedElements": []
    }
  ],
  "taxonomies": [
    {
        "taxonomyId": "",
        "taxonomyName": ""
    }
  ],
  "tags": [
    {
      "tagId": "",
      "tagTaxonomyId": "",
      "tagName": "",
      "tagBody": ""
    }
  ],
  "pages":[
    {
        "pageId": "",
        "pageName": ""
    }
  ],
  "messages": [
    {
        "messageId": "",
        "messageName": "",
        "messageBody": "",
        "messageTags": []
    }
  ], 
  "rules": [
      {
          "ruleId": "",
          "ruleName": "",
          "ruleBody": "",
          "ruletags": []
      }
  ]
}
```
### Output Attributes
- **elements**: Elements are the basic id, usual an HTML code snippet that was scanned.
- **elementId**: Unique id for an element, generated by Equalify Formatter to relate other elements.
- **elementCode**: Code snippet for the element - usually HTML.
- **elementPages**: Array of ids of pages related to the element.
- **elementRules**: Array of ids of rules related to the element.
- **elementMessages**: Array of ids of messages related to the element.
- **elementTags**: Array of ids of tags related to the element.
- **relatedElements**: Array of ids of related elements.
- **taxonomies**: Groups of tags. Equalify uses two taxonomies by default: Rule Tags and Impact.
- **taxonomyName**: The name of the taxonomy. This is usually set by Equalify or whatever service is processing results.
- **taxonomyId**: A unique ID. This is usually set by Equalify or whatever service is processing results.
- **tags**: An array of tags that helps organize and attribute additional information to elements.
- **tagId**: Unique id for a tag, generated by Equalify Formatter to relate to elements.
- **tagTaxonomyId**: The related taxonomy. 
- **tagName**: A name, such as a WCAG criteria.
- **pages**: An array of pages.
- **pageId**: Unique id for a page, generated by Equalify Formatter to relate to elements.
- **pageName**: A name of the page - usually expressed as a URL.
- **messages**: An array of messages.
- **messageId**: Unique id for a message, generated by Equalify Formatter to relate to elements.
- **messageBody**: The body of the message.
- **messageTags**: The related tags. 
- **rules**: An array of rules.
- **ruleId**: Unique id for a rule, generated by Equalify Formatter to relate to elements.
- **ruleBody**: The body of the rule.
- **ruleTags**: The related tags. 

## Supported Scans
The following scans will be supported:
- [axe-core](https://github.com/dequelabs/axe-core) - Version 4.8.4. Scan ID: "axe".
- [WAVE](https://wave.webaim.org) - as of Feb. 29, 2024. Scan ID: "wave".

## Supporting a New Scan
We hope to add other scans! 

Documentation and code in this repo should provide the basis for including any scan.

Please create a pull request with any additional scan you want.